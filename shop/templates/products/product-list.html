{% extends 'shop_home.html' %}
{% load static %}

{% block content %}



{% for c in categories %}

    {{c.name}}
    <a href="{% url 'dashboard:categorie-delete' c.pk%}"> delete</a>
    <a href="{% url 'shop:categorie-detail' c.pk%}"> view</a>

    <br>
{% endfor %}
<div class="row row-cols-1  row-cols-md-4 g-4" style="margin-left: 10px;">

  {% for p in products %}

  <div class="col">
    <div class="card h-100 " style="width: 25em; border-radius: 20px;">
      <img src="{{ p.product_image.url}}" class="card-img-top h-100 w-100" style="border-radius: 20px;" >
      <div class="card-body">
        <h5 class="card-title">{{p.name}}</h5>
        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>

        <a href="{% url 'shop:product-detail' p.id %}"><button class="btn btn-primary">view</button></a>
        <button data-product="{{p.id}}" data-action="add" class="update-cart btn btn-secondary">add to cart</button>

      </div>

    </div>
  </div>

  {% endfor %}

</div>

<section class=" bg-gray-100 text-gray-600 body-font">
  
  <div class="container px-5 py-24 mx-auto">

    <div class="flex flex-wrap -m-7 ">
      {% for p in products %}

      <div class="lg:w-1/4 md:w-1/2 p-4 w-full ml-20">
        <a class="block relative h-48 rounded overflow-hidden">
          <img alt="ecommerce" class="object-cover object-center w-full h-full block" src="{{ p.product_image.url}}">
        </a>
        <div class="mt-4">
          <h3 class="text-gray-500 text-xs tracking-widest title-font mb-1">{{p.categorie}}</h3>
          <h2 class="text-gray-900 title-font text-lg font-medium">{{p.name}}</h2>
          <p class="mt-1">${{p.price}}</p>
          <a href="{% url 'shop:product-detail' p.id%}"><button class=" mb-5 flex ml-auto text-white bg-red-500 border-0 py-2 px-6 focus:outline-none hover:bg-red-600 rounded">view</button></a>

        </div>
        <button data-product="{{p.id}}" data-action="add" class="update-cart flex ml-auto text-white bg-red-500 border-0 py-2 px-6 focus:outline-none hover:bg-red-600 rounded">add to cart</button>

      </div>
      {% endfor %}

    </div>

  </div>

</section>



  



<script>
  const user = '{{request.user}}'	
  function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
const csrftoken = getCookie('csrftoken');
</script>
<script src="{% static 'products/js/cart.js' %}"></script>

{% endblock content %}

